#include<stdio.h>
#include<locale.h>
#include"modulos.h"

void tela_de_login()
{
    char login[15] = "admin", senha[16] = "admin", login1[15], senha1[16];
    int login_efetuado = 0;

    while(!login_efetuado)
    {
        system("cls");
        puts("-=-=-=-=-=-=- TELA DE LOGIN -=-=-=-=-=-=-");
        puts("NOME DE USUÁRIO: ");
        scanf("%s", login1);

        puts("\nSENHA: ");
        scanf("%s", senha1);
        puts("-=-=-=-=-=-=-=-=-=-=-=-=--=-=-=-=-=-=--=-=-");

        if (strcmp(login, login1) == 0 && strcmp(senha, senha1) == 0)
        {
            puts("\nLOGADO! ENTRANDO NO SISTEMA EM INSTANTES...\n\n");
            Sleep (1500);
            login_efetuado = 1;
        }else
        {
            puts("\nUSUÁRIO OU SENHA INCORRETOS! TENTE NOVAMENTE EM INSTANES.\n\n");
            Sleep (1500);
        }
    }
}


void menu_inicial() // FUNÇÃO PRA EXIBIR O MENU INICIAL DE OPÇÕES.
{
    system("cls");
    puts("-=-=-=-=-=- SISTEMA DE GESTÃO -=-=-=-=-=-");
    puts("[1] - CADASTRAR CLIENTE");
    puts("[2] - CADASTRAR FUNCIONÁRIO");
    puts("[3] - CADASTRAR PRODUTOS");
    puts("[4] - RELATÓRIOS");
    puts("[5] - SAIR");
    puts("-=-=-=-=-=--=-=-=-=-=--=-=-=-=-=-=-=-=-=-");
    puts("ESOLHA UMA OPÇÃO: ");
}


void menu_relatorios() // FUNÇÃO PARA EXIBIR O MENU DE RELATÓRIOS.
{
    system("cls");
    puts("-=-=-=-=-=-=-=-=- RELATÓRIOS -=-=-=-=-=-=-=-=-");
    puts("[1] - EXIBIR CLIENTES CADASTRADOS");
    puts("[2] - EXIBIR FUNCINÁRIOS CADASTRADOS");
    puts("[3] - EXIBIR PRODUTOS CADASTRADOS");
    puts("[4] - VOLTAR");
    puts("-=-=-=-=-=--=-=-=-=-=--=-=-=-=-=-=-=-=-=-=-=-=-");
    puts("ESOLHA UMA OPÇÃO: ");
}


void cadastro_cliente(int opcao) // FUNÇÃO PARA CADASTRAR CLIENTES E SALVAR OS DADOS.
{
    CLIENTE cliente;

    do
    {
        system("cls");
        puts("-=-=-=-=-=- CADASTRO DE CLIENTE -=-=-=-=-=-");
        getchar();
        puts("NOME DO CLIENTE: ");
        scanf("%[^\n]s", &cliente.nome);

        getchar();
        puts("\nDATA DE NASCIMNETO: ");
        scanf("%[^\n]s", &cliente.nascimento);

        getchar();
        puts("\nCPF: ");
        scanf("%s", &cliente.cpf);

        getchar();
        puts("\nTELEFONE: ");
        scanf("%[^\n]s", &cliente.telefone);

        getchar();
        puts("\nCIDADE ONDE MORA: ");
        scanf("%[^\n]s", &cliente.cidade);

        salvar_cliente(cliente); // DEPOIS DE CADASTRADO OS DADOS JÁ SÃO SALVOS IMEDIATAMENTE.

        puts("\nDESEJA CONTINUAR? [1 - SIM/ 2 - NÃO]");
        scanf("%d", &opcao);

    }while(opcao == 1);
}


void salvar_cliente(CLIENTE cliente) // FUNÇÃO QUE RECEBE UMA VARIÁVEL DO TIPO CLIENTE E SALVA OS DADOS EM UM ARQUIVO TXT.
{
    FILE *fp;
    fp = fopen("clientes.txt", "a");

    fprintf(fp, "%s, ", cliente.nome);
    fprintf(fp, "%s, ", cliente.nascimento);
    fprintf(fp, "%s, ", cliente.cpf);
    fprintf(fp, "%s, ", cliente.telefone);
    fprintf(fp, "%s\n", cliente.cidade);

    fclose(fp);
}


void cadastro_funcinario(int opcao) // FUNÇÃO PARA CADASTRAR FUNCIONÁRIOS E SALVAR OS DADOS.
{
    FUNCIONARIO funcionario;

    do
    {
        system("cls");
        puts("-=-=-=-=-=- CADASTRO DE FUNCIONÁRIO -=-=-=-=-=-");
        getchar();
        puts("NOME DO FUNCIONÁRIO: ");
        scanf("%[^\n]s", &funcionario.nome);

        getchar();
        puts("\nDATA DE NASCIMENTO: ");
        scanf("%[^\n]s", &funcionario.nascimento);

        getchar();
        puts("\nCPF: ");
        scanf("%[^\n]s", &funcionario.cpf);

        getchar();
        puts("\nTELEFONE: ");
        scanf("%[^\n]s", &funcionario.telefone);


        getchar();
        puts("\nCARGO DO FUNCIONÁRIO: ");
        scanf("%[^\n]s", &funcionario.cargo);

        getchar();
        puts("\nDATA DE INGRESSO: ");
        scanf("%[^\n]s", &funcionario.data_ingresso);


        salvar_funcionario(funcionario); // DEPOIS DE CADASTRADO OS DADOS JÁ SÃO SALVOS IMEDIATAMENTE.

        puts("\nDESEJA CONTINUAR? [1 - SIM/ 2 - NÃO]");
        scanf("%d", &opcao);

    }while(opcao == 1);
}


void salvar_funcionario(FUNCIONARIO funcionario) // FUNÇÃO QUE RECEBE UMA VARIÁVEL DO TIPO FUNCIONÁRIO E SALVA OS DADOS EM UM ARQUIVO TXT.
{
    FILE *fp;
    fp = fopen("funcionarios.txt", "a");

    fprintf(fp, "%s, ", funcionario.nome);
    fprintf(fp, "%s, ", funcionario.nascimento);
    fprintf(fp, "%s, ", funcionario.cpf);
    fprintf(fp, "%s, ", funcionario.telefone);
    fprintf(fp, "%s, ", funcionario.cargo);
    fprintf(fp, "%s\n", funcionario.data_ingresso);

    fclose(fp);
}


void cadastro_produto(int opcao)
{
    PRODUTO produto;
    do
    {
        system("cls");
        puts("-=-=-=-=-=- CADASTRO DE PRODUTOS -=-=-=-=-=-");
        getchar();
        puts("NOME DO PRODUTO: ");
        scanf("%[^\n]s", &produto.nome);

        getchar();
        puts("\nCATEGORIA: ");
        scanf("%[^\n]s", &produto.categoria);

        getchar();
        puts("\nPREÇO: R$");
        scanf("%f", &produto.preco);

        salvar_produto(produto);

        puts("\nDESEJA CONTINUAR? [1 - SIM/ 2 - NÃO]");
        scanf("%d", &opcao);
    }while(opcao == 1);
}


void salvar_produto(PRODUTO produto)
{
    FILE *fp;
    fp = fopen("produtos.txt", "a");

    fprintf(fp, "%s, ", produto.nome);
    fprintf(fp, "%s, ", produto.categoria);
    fprintf(fp, "%.2f\n", produto.preco);

    fclose(fp);
}


void exibir_clientes() // MOSTRA O CADASTRO DE CLIENTES OU DE FUNCIONÁRIO DE ACORDO COM A OPÇÃO ESCOLHIDA NO MENU.
{
    FILE *fp;
    char linha[136];
    int id_cliente=0;

    fp = fopen("clientes.txt", "r");

    system("cls");
    puts("-=-=-=-=-=- CLIENTES CADASTRADOS -=-=-=-=-=-");
    while(fgets(linha, 136, fp) != NULL)
    {
        printf("ID:%d \n%s", id_cliente, linha);
        id_cliente += 1;
        puts("-=-=-=-=-=--=-=-=-=-=--=-=-=-=-=--=-=-=-=-=--=-=-");
    }
    puts("\n(aperte qualquer tecla para voltar!)");
    getchar();
    getchar();
}


void exibir_funcionarios()
{
    FILE *fp;
    char linha[136];
    int id_funcionario=0;

    fp = fopen("funcionarios.txt", "r");

    system("cls");
    puts("-=-=-=-=-=- FUNCIONÁRIOS CADASTRADOS -=-=-=-=-=-");
    while(fgets(linha, 136, fp) != NULL)
    {
        printf("ID:%d \n%s", id_funcionario, linha);
        id_funcionario += 1;
        puts("-=-=-=-=-=--=-=-=-=-=--=-=-=-=-=--=-=-=-=-=--=-=-");
    }
    puts("\n(aperte qualquer tecla para voltar!)");
    getchar();
    getchar();
}


void exibir_produtos()
{
    FILE *fp;
    char linha[50];
    int id_produto=0;

    fp = fopen("produtos.txt", "r");

    system("cls");
    puts("-=-=-=-=-=- PRODUTOS CADASTRADOS -=-=-=-=-=-");
    while(fgets(linha, 50, fp) != NULL)
    {
        printf("ID:%d \n%s", id_produto, linha);
        id_produto += 1;
        puts("-=-=-=-=-=--=-=-=-=-=--=-=-=-=-=--=-=-=-=-=--=-=-");
    }
    puts("\n(aperte qualquer tecla para voltar!)");
    getchar();
    getchar();
}
